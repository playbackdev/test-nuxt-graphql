(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{243:function(t,e,n){var content=n(253);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(91).default)("0fe2b822",content,!0,{sourceMap:!1})},244:function(t,e,n){var content=n(255);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(91).default)("230a4128",content,!0,{sourceMap:!1})},245:function(t,e,n){var content=n(257);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(91).default)("1b7833da",content,!0,{sourceMap:!1})},246:function(t,e,n){"use strict";var r=n(14),o=n(8),c=n(92),d=n(21),l=n(17),f=n(31),v=n(171),m=n(59),h=n(9),_=n(93),x=n(60).f,P=n(30).f,w=n(18).f,N=n(250).trim,E=o.Number,I=E.prototype,$="Number"==f(_(I)),k=function(t){var e,n,r,o,c,d,l,code,f=m(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=N(f)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+f}for(d=(c=f.slice(2)).length,l=0;l<d;l++)if((code=c.charCodeAt(l))<48||code>o)return NaN;return parseInt(c,r)}return+f};if(c("Number",!E(" 0o1")||!E("0b1")||E("+0x1"))){for(var y,C=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof C&&($?h((function(){I.valueOf.call(n)})):"Number"!=f(n))?v(new E(k(e)),n,C):k(e)},F=r?x(E):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;F.length>A;A++)l(E,y=F[A])&&!l(C,y)&&w(C,y,P(E,y));C.prototype=I,I.constructor=C,d(o,"Number",C)}},247:function(t,e,n){"use strict";n.r(e);n(246);var r={name:"productRow",props:{index:{type:Number,required:!0},product:{type:Object,required:!0}},filters:{roundPriceFilter:function(t){return Math.floor(t)+" ₽"}},methods:{editInit:function(){this.$emit("edit-begin",this.product)}}},o=n(34),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v(t._s(t.index+1))]),t._v(" "),n("td",[t._v(t._s(t.product.name))]),t._v(" "),n("td",[t._v(t._s(t.product.vendor_code))]),t._v(" "),n("td",[t._v(t._s(t.product.series))]),t._v(" "),n("td",[t._v(t._s(t._f("roundPriceFilter")(t.product.prices[0].price)))]),t._v(" "),n("td",[n("button",{on:{click:function(e){return e.preventDefault(),t.editInit(e)}}},[n("svg",{staticClass:"bi bi-pencil",attrs:{width:"1em",height:"1.2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}})])])])])}),[],!1,null,"1678ea20",null);e.default=component.exports},248:function(t,e,n){"use strict";n.r(e);n(46);var r={name:"productEditForm",props:{product:{type:Object,required:!0}},data:function(){return{name:"",vendor_code:""}},created:function(){var t=this.product,e=t.name,n=t.vendor_code;this.name=e,this.vendor_code=n},watch:{product:function(t){var e=t.name,n=t.vendor_code;this.name=e,this.vendor_code=n}},methods:{saveInit:function(){this.name===this.product.name&&this.vendor_code===this.product.vendor_code?this.$emit("close-edit-form"):this.$emit("save-init",{id:this.product.id,name:this.name,vendor_code:this.vendor_code})}}},o=(n(252),n(34)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-wrapper"},[n("div",{staticClass:"form-container"},[n("h2",[t._v("Editing")]),t._v(" "),n("form",[n("div",{staticClass:"form-item"},[n("label",{attrs:{for:"id-product-name"}},[t._v("Наименование")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"id-product-name",name:"name",placeholder:"Введите название товара"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-item"},[n("label",{attrs:{for:"id-product-vendor"}},[t._v("Артикул")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vendor_code,expression:"vendor_code"}],attrs:{id:"id-product-vendor",name:"name",placeholder:"Введите артикул"},domProps:{value:t.vendor_code},on:{input:function(e){e.target.composing||(t.vendor_code=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-item"},[n("button",{attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.saveInit(e)}}},[t._v("Сохранить")])])])])])}),[],!1,null,"8724866c",null);e.default=component.exports},249:function(t,e,n){"use strict";n.r(e);n(246);var r={name:"Pagination",props:{page:{type:String|Number}},data:function(){return{currentPage:1}},watch:{page:function(){this.currentPage=this.page},currentPage:function(){this.$emit("page-changed",{page:this.currentPage})}},created:function(){this.currentPage=this.page},methods:{setPage:function(t){var e=this.currentPage+t;this.currentPage=e<1?1:e}}},o=(n(254),n(34)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container"},[n("button",{on:{click:function(e){return e.preventDefault(),t.setPage(-1)}}},[t._v("< Prev")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentPage,expression:"currentPage"}],domProps:{value:t.currentPage},on:{input:function(e){e.target.composing||(t.currentPage=e.target.value)}}}),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.setPage(1)}}},[t._v("Next >")])])}),[],!1,null,"cd9d2d70",null);e.default=component.exports},250:function(t,e,n){var r=n(20),o="["+n(251)+"]",c=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),l=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(d,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},251:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},252:function(t,e,n){"use strict";var r=n(243);n.n(r).a},253:function(t,e,n){(e=n(90)(!1)).push([t.i,".form-wrapper[data-v-8724866c]{position:fixed;display:flex;justify-content:center;align-items:center;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,.5)}.form-container[data-v-8724866c]{padding:10px;font-size:14px;background:#f0f0f0;border:1px solid #dcdcdc;border-radius:5px;box-shadow:1px 2px 3px #646464}.form-container form .form-item[data-v-8724866c]{clear:both;text-align:right;margin:10px}.form-container button[data-v-8724866c]{padding:5px}.form-container input[data-v-8724866c]{min-width:300px}",""]),t.exports=e},254:function(t,e,n){"use strict";var r=n(244);n.n(r).a},255:function(t,e,n){(e=n(90)(!1)).push([t.i,".pagination-container[data-v-cd9d2d70]{margin:10px}.pagination-container input[data-v-cd9d2d70]{width:40px}",""]),t.exports=e},256:function(t,e,n){"use strict";var r=n(245);n.n(r).a},257:function(t,e,n){(e=n(90)(!1)).push([t.i,".content{margin:10px}.table-products{color:#000;font-size:14px;background:#f0f0f0;border:1px solid #dcdcdc;border-collapse:separate;border-radius:5px;box-shadow:0 1px 2px #646464}.table-products td{padding:5px;background-color:#e6e6e6;border-top:1px solid #fff;border-bottom:1px solid #b4b4b4;border-left:1px solid #b4b4b4}.table-products tr:first-child td{padding:10px;background-color:#d2d2d2;text-align:center;font-weight:700}.table-products td:first-child{text-align:center}button{border:1px solid #8c8c8c;box-shadow:0 1px 2px #a0a0a0;border-radius:3px;background:#dcdcdc;transition:all .3s ease}button:hover{background:#f0f0f0;box-shadow:0 1px 4px #8c8c8c;border:1px solid #1e1e1e;cursor:pointer}.table-products td:last-child button{width:30px;height:30px;padding:5px}",""]),t.exports=e},258:function(t,e,n){"use strict";n.r(e);n(46);var r=n(247),o=n(248);function c(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var d=n(84),l=n.n(d);function f(){var data=c(["\n  mutation UpdateProduct($id: String!, $name: String!, $vendor_code: String!) {\n    update_products(where: {id: {_eq: $id}}, _set: {name: $name, vendor_code: $vendor_code}) {\n      returning {\n        id\n        name\n        series\n        vendor_code\n      }\n    }\n  }"]);return f=function(){return data},data}function v(){var data=c(["\n  query Products($limit: Int!, $offset: Int!) {\n    products(limit:$limit, offset:$offset) {\n      id\n      name\n      vendor_code\n      series\n      prices {\n        price\n      }\n    }\n  }"]);return v=function(){return data},data}var m=l()(v()),h=l()(f()),_={components:{Pagination:n(249).default,ProductEditForm:o.default,ProductRow:r.default},data:function(){return{editing:null,limit:40,page:1}},computed:{offset:function(){return this.limit*(this.page-1)}},apollo:{products:{query:m,variables:function(){return{limit:this.limit,offset:this.offset}}}},methods:{startEditing:function(t){this.editing=t},saveProduct:function(t){var e=t.id,n=t.name,r=t.vendor_code;this.$apollo.mutate({mutation:h,variables:{id:e,name:n,vendor_code:r}}).then((function(data){console.log(data)})),this.editing=null},changePage:function(t){var e=t.page;this.page=e},closeEditForm:function(){this.editing=null}}},x=(n(256),n(34)),component=Object(x.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("Pagination",{attrs:{page:t.page},on:{"page-changed":t.changePage}}),t._v(" "),t.editing?n("ProductEditForm",{attrs:{product:t.editing},on:{"save-init":t.saveProduct,"close-edit-form":t.closeEditForm}}):t._e(),t._v(" "),t.$apollo.loading?n("div",[t._v("Loading...")]):n("table",{staticClass:"table-products"},[t._m(0),t._v(" "),t._l(t.products,(function(e,i){return n("ProductRow",{key:e.id,attrs:{index:i,product:e},on:{"edit-begin":t.startEditing}})}))],2)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v("№")]),t._v(" "),n("td",[t._v("Наименование")]),t._v(" "),n("td",[t._v("Артикул")]),t._v(" "),n("td",[t._v("Серия")]),t._v(" "),n("td",[t._v("Цена")]),t._v(" "),n("td")])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Pagination:n(249).default,ProductEditForm:n(248).default,ProductRow:n(247).default})}}]);